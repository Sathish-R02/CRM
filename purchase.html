{% extends "base.html" %}
{% block content %}
<h2>Record Purchase</h2>
<form method="post">
  <label>Product:
    <select name="product_id" required>
      {% for p in products %}
      <option value="{{ p.id }}">{{ p.name }}</option>
      {% endfor %}
    </select>
  </label>
  <label>Supplier:
    <select name="supplier_id">
      <option value="">- none -</option>
      {% for s in suppliers %}
      <option value="{{ s.id }}">{{ s.name }}</option>
      {% endfor %}
    </select>
  </label>
  <label>Quantity: <input name="qty" type="number" min="1" value="1" required></label>
  <label>Cost per item: <input name="cost" type="number" step="0.01" value="0"></label>
  <label>Note: <input name="note"></label>
  <button type="submit">Record Purchase</button>
</form>

<hr>
<h3>Purchases</h3>
{% if purchases %}
<table>
  <tr><th>ID</th><th>Product ID</th><th>Supplier ID</th><th>Qty</th><th>Total</th><th>Date</th></tr>
  {% for p in purchases %}
    <tr>
      <td>{{ p.id }}</td><td>{{ p.product_id }}</td><td>{{ p.supplier_id }}</td>
      <td>{{ p.qty }}</td><td>{{ p.total_cost }}</td><td>{{ p.date }}</td>
    </tr>
  {% endfor %}
</table>
{% else %}
<p>No purchases yet.</p>
{% endif %}
{% endblock %}
