{% extends "base.html" %}
{% block content %}
<h2>Record Sale</h2>
<form method="post">
  <label>Product:
    <select name="product_id" required>
      {% for p in products %}
      <option value="{{ p.id }}">{{ p.name }} (stock: {{ p.stock }})</option>
      {% endfor %}
    </select>
  </label>
  <label>Customer:
    <select name="customer_id">
      <option value="">- walk-in -</option>
      {% for c in customers %}
      <option value="{{ c.id }}">{{ c.name }}</option>
      {% endfor %}
    </select>
  </label>
  <label>Quantity: <input name="qty" type="number" min="1" value="1" required></label>
  <label>Price per item: <input name="price" type="number" step="0.01" value="0"></label>
  <label>Note: <input name="note"></label>
  <button type="submit">Record Sale</button>
</form>

<hr>
<h3>Sales</h3>
{% if sales %}
<table>
  <tr><th>ID</th><th>Product ID</th><th>Customer ID</th><th>Qty</th><th>Total</th><th>Date</th></tr>
  {% for s in sales %}
    <tr>
      <td>{{ s.id }}</td><td>{{ s.product_id }}</td><td>{{ s.customer_id }}</td>
      <td>{{ s.qty }}</td><td>{{ s.total_price }}</td><td>{{ s.date }}</td>
    </tr>
  {% endfor %}
</table>
{% else %}
<p>No sales yet.</p>
{% endif %}
{% endblock %}
